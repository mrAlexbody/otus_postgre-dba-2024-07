### **otus_postgre-dba-2024-07** 
##### **Home Work Postgre-DBA-2024-07**

---
# Домашнее задание 04
## Работа с базами данных, пользователями и правами

### Цель:
* Создание новой базы данных, схемы и таблицы
* Создание роли для чтения данных из созданной схемы созданной базы данных
* Создание роли для чтения и записи из созданной схемы созданной базы данных

### Описание/Пошаговая инструкция выполнения домашнего задания:
1. Cоздайте новый кластер **PostgresSQL 14**
2. Зайдите в созданный кластер под пользователем **_postgres_**
3. Создайте новую базу данных _**testdb**_
4. Зайдите в созданную базу данных под пользователем _**postgres**_
5. Создайте новую схему _**testnm**_
6. Создайте новую таблицу _**t1**_ с одной колонкой _**c1**_ типа integer
7. Вставьте строку со значением _**c1=1**_
8. Создайте новую роль **_readonly_**
9. Дайте новой роли право на подключение к базе данных _**testdb**_
10. Дайте новой роли право на использование схемы _**testnm**_
11. Дайте новой роли право на select для всех таблиц схемы _**testnm**_
12. Создайте пользователя _**testread**_ с паролем _**test123**_
13. Дайте роль readonly пользователю _**testread**_
14. Зайдите под пользователем _**testread**_ в базу данных _**testdb**_
15. Сделайте: 
````postgresql
select * from t1;
````
16. Получилось? (могло если вы делали сами не по шпаргалке и не упустили один существенный момент про который позже)
17. Напишите что именно произошло в тексте домашнего задания
18. У вас есть идеи почему? ведь права то дали?
19. Посмотрите на список таблиц
20. Подсказка в шпаргалке под пунктом **20**
21. А, почему так получилось с таблицей (если делали сами и без шпаргалки, то может у вас все нормально)
22. Вернитесь в базу данных _**testdb**_ под пользователем postgres
23. Удалите таблицу _**t1**_
24. Создайте ее заново но уже с явным указанием имени схемы _**testnm**_
25. Вставьте строку со значением **_c1=1**_
26. Зайдите под пользователем _**testread**_ в базу данных _**testdb**_
27. Сделайте: 
````postgresql
select * from testnm.t1;
````
28. Получилось?
29. Есть идеи почему? если нет - _смотрите шпаргалку_
30. Как сделать так чтобы такое больше не повторялось? если нет идей - _смотрите шпаргалку_
31. Сделайте:
```postgresql
select * from testnm.t1;
```
32. Получилось?
33. Есть идеи почему? если нет - _смотрите шпаргалку_
34. Сделайте:
```postgresql
select * from testnm.t1;
```
35. Получилось?
36. **УРА!**
37. Теперь попробуйте выполнить команду:
```postgresql
create table t2(c1 integer); insert into t2 values (2);
```
38. А, как так? Нам же никто прав на создание **таблиц** и **insert** в них под ролью _**readonly**_?
39. Есть идеи как убрать эти права? если нет - _смотрите шпаргалку_
40. Если вы справились сами то расскажите что сделали и почему, если смотрели шпаргалку - объясните что сделали и почему выполнив указанные в ней команды
41. Теперь попробуйте выполнить команду:
```postgresql
create table t3(c1 integer); insert into t2 values (2);
```
42. Расскажите что получилось и почему
-----------
#### Создадим новый кластер **Postresql 14**:
```shell

```
#### Зайдём в созданный кластер под пользователем _postgres_:
```shell

```
#### Cоздадим новую базу данных _testdb_:
```postgresql

```
#### Зайдите в созданную базу данных под пользователем _postgres_ создадим новую схему _testnm_:
```postgresql

```
#### Создадим новую таблицу _t1_ с одной колонкой _c1_ типа _integer_ 
вставьте строку со значением c1=1
